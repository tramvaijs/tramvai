"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1487],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return f}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(n),f=i,m=c["".concat(s,".").concat(f)]||c[f]||d[f]||a;return n?r.createElement(m,o(o({ref:t},p),{},{components:n})):r.createElement(m,o({ref:t},p))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var u=2;u<a;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1739:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return a},metadata:function(){return l},toc:function(){return u}});var r=n(7462),i=(n(7294),n(3905));const a={},o=void 0,l={unversionedId:"references/libs/webpack-dedupe-plugin",id:"references/libs/webpack-dedupe-plugin",title:"webpack-dedupe-plugin",description:"Module deduplication plugin for webpack.",source:"@site/tmp-docs/references/libs/webpack-dedupe-plugin.md",sourceDirName:"references/libs",slug:"/references/libs/webpack-dedupe-plugin",permalink:"/docs/references/libs/webpack-dedupe-plugin",draft:!1,editUrl:"https://github.com/tramvaijs/tramvai/-/edit/master/docs/tmp-docs/references/libs/webpack-dedupe-plugin.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"user-agent",permalink:"/docs/references/libs/user-agent"},next:{title:"autoscroll",permalink:"/docs/references/modules/autoscroll"}},s={},u=[{value:"Usage",id:"usage",level:2},{value:"Api",id:"api",level:2},{value:"Options",id:"options",level:3},{value:"strategy",id:"strategy",level:4},{value:"ignorePackages",id:"ignorepackages",level:4},{value:"showLogs",id:"showlogs",level:4},{value:"onDedupeInfo",id:"ondedupeinfo",level:4}],p={toc:u};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Module deduplication plugin for webpack."),(0,i.kt)("p",null,"Internally webpack treats modules from different directories as completely different modules, and in result bundle there will be all these modules as separate entries which leads to duplication and bundle size increase. This module allows to leave only one of these modules based on chosen strategy."),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// webpack.config.js\nconst { DedupePlugin } = require('@tinkoff/webpack-dedupe-plugin')\n\nmodule.exports = {\n  ...\n  plugins: [\n    new DedupePlugin({\n      strategy: \"equality\",\n    })\n  ]\n}\n\n")),(0,i.kt)("h2",{id:"api"},"Api"),(0,i.kt)("h3",{id:"options"},"Options"),(0,i.kt)("h4",{id:"strategy"},"strategy"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"equality is used by default")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'"equality"')," - uses strict version comparison. Dedupes modules in ",(0,i.kt)("inlineCode",{parentName:"li"},"node_modules")," with equal package version that are imported from different sources. E.g. imports for ",(0,i.kt)("inlineCode",{parentName:"li"},"node_modules/package/index.js")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"node_modules/nested-package/node_modules/package/index.js")," are deduped into a single ",(0,i.kt)("inlineCode",{parentName:"li"},"node_modules/package/index.js")," import whilst without dedupe it will bundle two files as separate modules."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'"semver"')," - compares version of packages based on semver. It can dedupe all of the imports with the same major version and any of the minor and patch versions. E.g. next versions will be deduped: from ",(0,i.kt)("inlineCode",{parentName:"li"},"1.14.0")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"1.16.2")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"1.16.2"),", from ",(0,i.kt)("inlineCode",{parentName:"li"},"0.14.1")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"0.16.5")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"0.16.5"),", whilst versions ",(0,i.kt)("inlineCode",{parentName:"li"},"0.0.2")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"0.0.5")," will be left without deduplication."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"false")," - disable deduplication, by default")),(0,i.kt)("h4",{id:"ignorepackages"},"ignorePackages"),(0,i.kt)("p",null,"List of regular expressions that specify which modules should not be deduplicated."),(0,i.kt)("h4",{id:"showlogs"},"showLogs"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"By default logs are enabled")),(0,i.kt)("p",null,"Output logs about deduplicated paths to the console after build."),(0,i.kt)("h4",{id:"ondedupeinfo"},"onDedupeInfo"),(0,i.kt)("p",null,"Event handler that gets the info about dedupe packages after build, but before the default logs from the plugin are shown"))}d.isMDXComponent=!0}}]);