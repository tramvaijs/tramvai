"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6011],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>y});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),y=i,m=d["".concat(l,".").concat(y)]||d[y]||p[y]||o;return n?r.createElement(m,a(a({ref:t},c),{},{components:n})):r.createElement(m,a({ref:t},c))}));function y(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8809:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var r=n(7462),i=(n(7294),n(3905));const o={id:"integrity",title:"Integrity"},a=void 0,s={unversionedId:"features/build/integrity",id:"features/build/integrity",title:"Integrity",description:"Subresource Integrity Support",source:"@site/tmp-docs/03-features/019-build/01-integrity.md",sourceDirName:"03-features/019-build",slug:"/features/build/integrity",permalink:"/docs/features/build/integrity",draft:!1,editUrl:"https://github.com/tramvaijs/tramvai/-/edit/master/docs/tmp-docs/03-features/019-build/01-integrity.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"integrity",title:"Integrity"},sidebar:"sidebar",previous:{title:"Polyfills Integration",permalink:"/docs/features/polyfills"},next:{title:"Introduction to tramvai",permalink:"/docs/concepts/overview"}},l={},u=[{value:"Subresource Integrity Support",id:"subresource-integrity-support",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Details and Limitations",id:"details-and-limitations",level:2}],c={toc:u};function p({components:e,...t}){return(0,i.kt)("wrapper",(0,r.Z)({},c,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"subresource-integrity-support"},"Subresource Integrity Support"),(0,i.kt)("p",null,"You can enable support for the integrity mechanism for static assets (CSS/JS). To do this, add the following option to your configuration:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "projects": {\n    "projectName": {\n      "name": "project-name",\n      "integrity": true\n    }\n  }\n}\n')),(0,i.kt)("p",null,"Under the hood, the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/waysact/webpack-subresource-integrity"},"webpack-subresource-integrity-plugin")," is used to generate integrity values. You can also configure the plugin itself:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "projects": {\n    "projectName": {\n      "name": "project-name",\n      "integrity": {\n        "hashFuncNames": ["sha384"],\n        "enabled": "auto",\n        "hashLoading": "lazy"\n      }\n    }\n  }\n}\n')),(0,i.kt)("h2",{id:"how-it-works"},"How It Works"),(0,i.kt)("p",null,"During the build, the plugin generates an integrity hash for each compiled asset and adds it to the ",(0,i.kt)("inlineCode",{parentName:"p"},"stats.json")," file. At runtime, the server extracts the integrity value for each asset from ",(0,i.kt)("inlineCode",{parentName:"p"},"stats.json")," when injecting assets into the HTML and adds the ",(0,i.kt)("inlineCode",{parentName:"p"},"integrity")," attribute."),(0,i.kt)("h2",{id:"details-and-limitations"},"Details and Limitations"),(0,i.kt)("p",null,"Note that the integrity values are also added to the client bundle. This is necessary so that Webpack\u2019s runtime can load dynamic scripts via JSONP using integrity as well. If you have many asynchronous chunks, this can lead to a significant increase in the size of the synchronous chunk."),(0,i.kt)("p",null,"In such cases, the only viable solution is to reduce the number of asynchronous chunks."),(0,i.kt)("p",null,"Also, integrity does ",(0,i.kt)("strong",{parentName:"p"},"not")," work in a few cases:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"It doesn't work with child apps / module federation"),(0,i.kt)("li",{parentName:"ul"},"It doesn't account for ",(0,i.kt)("inlineCode",{parentName:"li"},"runtimeChunk: single"),", which can lead to invalidation of the synchronous chunk in almost every build")))}p.isMDXComponent=!0}}]);